{"version":3,"file":"esbuild.js","sources":["../../src/plugin/esbuild.ts"],"sourcesContent":["import { Plugin } from \"esbuild\";\nimport { build } from \"../cli/commands/build\";\nimport { dev } from \"../cli/commands/dev\";\nimport { pluginName } from \"./index\";\n\nexport default (): Plugin => ({\n  name: pluginName,\n  setup(pluginBuild) {\n    let registered = false;\n\n    pluginBuild.onStart(async () => {\n      if (!registered) {\n        registered = true;\n\n        // assume production build when `initialOptions.minify = true`\n        if (pluginBuild.initialOptions.minify) {\n          await build();\n        } else {\n          dev();\n        }\n      }\n    });\n  },\n});\n"],"names":[],"mappings":";;;;AAIA,cAAe,OAAO;AACtB,EAAE,IAAI,EAAE,UAAU;AAClB,EAAE,KAAK,CAAC,WAAW,EAAE;AACrB,IAAI,IAAI,UAAU,GAAG,KAAK;AAC1B,IAAI,WAAW,CAAC,OAAO,CAAC,YAAY;AACpC,MAAM,IAAI,CAAC,UAAU,EAAE;AACvB,QAAQ,UAAU,GAAG,IAAI;AACzB,QAAQ,IAAI,WAAW,CAAC,cAAc,CAAC,MAAM,EAAE;AAC/C,UAAU,MAAM,KAAK,EAAE;AACvB,QAAQ,CAAC,MAAM;AACf,UAAU,GAAG,EAAE;AACf,QAAQ;AACR,MAAM;AACN,IAAI,CAAC,CAAC;AACN,EAAE;AACF,CAAC,CAAC;;;;"}